(()=>{var e={};e.id=968,e.ids=[968],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},6113:e=>{"use strict";e.exports=require("crypto")},9523:e=>{"use strict";e.exports=require("dns")},2361:e=>{"use strict";e.exports=require("events")},7147:e=>{"use strict";e.exports=require("fs")},3685:e=>{"use strict";e.exports=require("http")},5158:e=>{"use strict";e.exports=require("http2")},1808:e=>{"use strict";e.exports=require("net")},2037:e=>{"use strict";e.exports=require("os")},1017:e=>{"use strict";e.exports=require("path")},7282:e=>{"use strict";e.exports=require("process")},2781:e=>{"use strict";e.exports=require("stream")},4404:e=>{"use strict";e.exports=require("tls")},7310:e=>{"use strict";e.exports=require("url")},3837:e=>{"use strict";e.exports=require("util")},9796:e=>{"use strict";e.exports=require("zlib")},9613:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>o.a,__next_app__:()=>p,originalPathname:()=>x,pages:()=>l,routeModule:()=>m,tree:()=>c}),t(9527),t(2029),t(5866);var a=t(3191),r=t(8716),i=t(7922),o=t.n(i),n=t(5231),d={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>n[e]);t.d(s,d);let c=["",{children:["admin",{children:["issues",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,9527)),"C:\\Users\\Admin\\Desktop\\bazara-vpn-site\\src\\app\\admin\\issues\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,2029)),"C:\\Users\\Admin\\Desktop\\bazara-vpn-site\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,5866,23)),"next/dist/client/components/not-found-error"]}],l=["C:\\Users\\Admin\\Desktop\\bazara-vpn-site\\src\\app\\admin\\issues\\page.tsx"],x="/admin/issues/page",p={require:t,loadChunk:()=>Promise.resolve()},m=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/admin/issues/page",pathname:"/admin/issues",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},6629:(e,s,t)=>{Promise.resolve().then(t.bind(t,9543))},9543:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>l});var a=t(326),r=t(7626),i=t.n(r),o=t(7577),n=t(5047);t(1046);var d=t(76),c=t(3504);function l(){let[e,s]=(0,o.useState)(!0),[t,r]=(0,o.useState)([]),l=(0,n.useRouter)(),x=async()=>{let e=(0,d.IO)((0,d.hJ)(c.db,"issues")),s=await (0,d.PL)(e),t=[];s.forEach(e=>{let s=e.data();t.push({id:e.id,name:s.name||"",email:s.email||"",category:s.category||"",text:s.text,replyType:s.replyType||"",createdAt:s.createdAt,status:s.status,attachments:s.attachments||[]})}),t.sort((e,s)=>e.status===s.status?s.createdAt-e.createdAt:"pending"===e.status?-1:"pending"===s.status||"delayed"===e.status?1:"delayed"===s.status?-1:0),r(t)},p=async(e,s)=>{await (0,d.r7)((0,d.JU)(c.db,"issues",e),{status:s}),await x()},m=t.filter(e=>"new"===e.status||"pending"===e.status).length;return e?a.jsx("div",{className:"min-h-screen flex items-center justify-center text-2xl",children:"Загрузка..."}):(0,a.jsxs)("main",{className:"jsx-d02a85b3c98055bc w-full max-w-3xl mx-auto flex flex-col gap-6 py-12 px-4 min-h-screen",children:[(0,a.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-start",gap:4},className:"jsx-d02a85b3c98055bc",children:[a.jsx("button",{onClick:()=>l.push("/admin"),style:{background:"none",border:"none",padding:0,marginBottom:2,cursor:"pointer",outline:"none"},title:"Назад",className:"jsx-d02a85b3c98055bc",children:a.jsx("svg",{width:"28",height:"28",viewBox:"0 0 24 24",fill:"none",stroke:"#ff8800",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",style:{transition:"stroke 0.2s"},className:"jsx-d02a85b3c98055bc",children:a.jsx("path",{d:"M15 18l-6-6 6-6",className:"jsx-d02a85b3c98055bc"})})}),(0,a.jsxs)("div",{style:{paddingTop:0},className:"jsx-d02a85b3c98055bc flex items-center gap-4 mb-2",children:[a.jsx("span",{className:"jsx-d02a85b3c98055bc text-2xl font-bold text-orange-400",children:"Активные проблемы"}),a.jsx("span",{className:"jsx-d02a85b3c98055bc badge",children:m}),a.jsx("button",{onClick:x,className:"jsx-d02a85b3c98055bc ml-2 text-sm text-orange-400 hover:text-orange-300",children:"⟳"})]})]}),0===t.length&&a.jsx("div",{className:"jsx-d02a85b3c98055bc text-gray-400 text-center mt-10",children:"Нет жалоб"}),t.filter(e=>"resolved"!==e.status).map(e=>(0,a.jsxs)("div",{className:`jsx-d02a85b3c98055bc issue-card flex flex-col gap-3 ${"delayed"===e.status?"opacity-70":""}`,children:[(0,a.jsxs)("div",{className:"jsx-d02a85b3c98055bc flex items-center gap-4 mb-1",children:[a.jsx("div",{className:`jsx-d02a85b3c98055bc font-bold text-lg ${"delayed"===e.status?"text-purple-400":"text-orange-400"} flex-1`,children:e.name?e.name:"Аноним"}),a.jsx("div",{className:"jsx-d02a85b3c98055bc text-sm text-gray-400",children:e.createdAt&&e.createdAt.toDate?e.createdAt.toDate().toLocaleString():e.createdAt?new Date(e.createdAt).toLocaleString():"-"})]}),(0,a.jsxs)("div",{className:"jsx-d02a85b3c98055bc flex items-center gap-3 mb-1",children:[e.category&&a.jsx("span",{className:"jsx-d02a85b3c98055bc px-3 py-1 bg-orange-900 text-orange-300 rounded-xl text-xs font-semibold",children:e.category}),e.email&&a.jsx("span",{className:"jsx-d02a85b3c98055bc px-3 py-1 bg-purple-900 text-purple-300 rounded-xl text-xs font-semibold",children:e.email})]}),a.jsx("div",{className:"jsx-d02a85b3c98055bc text-base mb-2",children:e.text}),e.attachments&&e.attachments.length>0&&a.jsx("div",{className:"jsx-d02a85b3c98055bc flex gap-2 mb-2",children:e.attachments.map((e,s)=>a.jsx("img",{src:e,onClick:()=>window.open(e,"_blank"),alt:"скриншот",className:"jsx-d02a85b3c98055bc screenshot-thumb"},s))}),(0,a.jsxs)("div",{className:"jsx-d02a85b3c98055bc flex gap-2",children:[("new"===e.status||"pending"===e.status||"delayed"===e.status)&&a.jsx("button",{onClick:()=>p(e.id,"resolved"),className:"jsx-d02a85b3c98055bc issue-btn",children:"✅ Решено"}),"pending"===e.status&&a.jsx(a.Fragment,{children:a.jsx("button",{onClick:()=>p(e.id,"delayed"),className:"jsx-d02a85b3c98055bc issue-btn",children:"\uD83D\uDD52 Отложить"})}),"chat"===e.replyType&&a.jsx("button",{onClick:()=>l.push(`/admin/support?userId=${e.id}`),className:"jsx-d02a85b3c98055bc issue-btn",children:"✉️ Ответить в чате"}),"email"===e.replyType&&e.email&&a.jsx("button",{onClick:()=>{e.email&&(navigator.clipboard.writeText(e.email),alert("Email скопирован!"))},className:"jsx-d02a85b3c98055bc issue-btn",children:"\uD83D\uDCE7 Ответить по email"})]})]},e.id)),a.jsx(i(),{id:"d02a85b3c98055bc",children:".issue-card{background:#232323;-webkit-border-radius:1.2rem;-moz-border-radius:1.2rem;border-radius:1.2rem;-webkit-box-shadow:0 2px 16px 0#f804;-moz-box-shadow:0 2px 16px 0#f804;box-shadow:0 2px 16px 0#f804;padding:1.5rem 2rem;margin-bottom:1.5rem;-webkit-transition:box-shadow.18s,-webkit-transform.15s;-moz-transition:box-shadow.18s,-moz-transform.15s;-o-transition:box-shadow.18s,-o-transform.15s;transition:box-shadow.18s,-webkit-transform.15s;transition:box-shadow.18s,-moz-transform.15s;transition:box-shadow.18s,-o-transform.15s;transition:box-shadow.18s,transform.15s;border:2px solid transparent}.issue-card:hover{-webkit-box-shadow:0 8px 32px 0#f80c,0 2px 8px 0#a259ff88;-moz-box-shadow:0 8px 32px 0#f80c,0 2px 8px 0#a259ff88;box-shadow:0 8px 32px 0#f80c,0 2px 8px 0#a259ff88;border-color:#f80;-webkit-transform:translatey(-2px)scale(1.01);-moz-transform:translatey(-2px)scale(1.01);-ms-transform:translatey(-2px)scale(1.01);-o-transform:translatey(-2px)scale(1.01);transform:translatey(-2px)scale(1.01)}.issue-btn{background:#232323;color:#f80;border:1.5px solid#f80;-webkit-border-radius:.7em;-moz-border-radius:.7em;border-radius:.7em;padding:.4em 1.2em;margin-right:.7em;margin-bottom:.5em;cursor:pointer;font-size:1em;font-weight:500;-webkit-transition:background.15s,color.15s;-moz-transition:background.15s,color.15s;-o-transition:background.15s,color.15s;transition:background.15s,color.15s}.issue-btn:hover{background:#f80;color:#fff}.issue-btn:last-child{margin-right:0}.badge{background:#ff3b3b;color:#fff;font-weight:bold;-webkit-border-radius:9999px;-moz-border-radius:9999px;border-radius:9999px;padding:.2em .8em;font-size:1.1rem;min-width:2em;text-align:center;margin-left:.7em}.screenshot-thumb{max-width:90px;max-height:70px;-webkit-border-radius:.7em;-moz-border-radius:.7em;border-radius:.7em;margin-right:.7em;border:1.5px solid#a259ff;-webkit-box-shadow:0 2px 8px#a259ff33;-moz-box-shadow:0 2px 8px#a259ff33;box-shadow:0 2px 8px#a259ff33;cursor:pointer;-webkit-transition:box-shadow.15s;-moz-transition:box-shadow.15s;-o-transition:box-shadow.15s;transition:box-shadow.15s}.screenshot-thumb:hover{-webkit-box-shadow:0 4px 16px#f808;-moz-box-shadow:0 4px 16px#f808;box-shadow:0 4px 16px#f808}"})]})}},3504:(e,s,t)=>{"use strict";t.d(s,{I:()=>n,db:()=>d});var a=t(2585),r=t(1046),i=t(76);let o=(0,a.C6)().length?(0,a.C6)()[0]:(0,a.ZF)({apiKey:"AIzaSyAouTEXN2lQapElxCEtmebO21t19i2WYns",authDomain:"bazara-vpn-admin.firebaseapp.com",projectId:"bazara-vpn-admin",storageBucket:"bazara-vpn-admin.appspot.com",messagingSenderId:"856281360473",appId:"1:856281360473:web:1b01584e7830672dcb2948"}),n=(0,r.v0)(o),d=(0,i.ad)(o)},9527:(e,s,t)=>{"use strict";t.r(s),t.d(s,{$$typeof:()=>o,__esModule:()=>i,default:()=>n});var a=t(8570);let r=(0,a.createProxy)(String.raw`C:\Users\Admin\Desktop\bazara-vpn-site\src\app\admin\issues\page.tsx`),{__esModule:i,$$typeof:o}=r;r.default;let n=(0,a.createProxy)(String.raw`C:\Users\Admin\Desktop\bazara-vpn-site\src\app\admin\issues\page.tsx#default`)}};var s=require("../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),a=s.X(0,[948,471,961,230],()=>t(9613));module.exports=a})();