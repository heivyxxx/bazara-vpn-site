(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[679],{8284:function(e,t,s){Promise.resolve().then(s.bind(s,2298))},6810:function(){},3398:function(e,t,s){"use strict";var r=s(357);s(6810);var a=s(2265),n=a&&"object"==typeof a&&"default"in a?a:{default:a},i=void 0!==r&&r.env&&!0,o=function(e){return"[object String]"===Object.prototype.toString.call(e)},l=function(){function e(e){var t=void 0===e?{}:e,s=t.name,r=void 0===s?"stylesheet":s,a=t.optimizeForSpeed,n=void 0===a?i:a;d(o(r),"`name` must be a string"),this._name=r,this._deletedRulePlaceholder="#"+r+"-deleted-rule____{}",d("boolean"==typeof n,"`optimizeForSpeed` must be a boolean"),this._optimizeForSpeed=n,this._serverSheet=void 0,this._tags=[],this._injected=!1,this._rulesCount=0;var l="undefined"!=typeof window&&document.querySelector('meta[property="csp-nonce"]');this._nonce=l?l.getAttribute("content"):null}var t=e.prototype;return t.setOptimizeForSpeed=function(e){d("boolean"==typeof e,"`setOptimizeForSpeed` accepts a boolean"),d(0===this._rulesCount,"optimizeForSpeed cannot be when rules have already been inserted"),this.flush(),this._optimizeForSpeed=e,this.inject()},t.isOptimizeForSpeed=function(){return this._optimizeForSpeed},t.inject=function(){var e=this;if(d(!this._injected,"sheet already injected"),this._injected=!0,"undefined"!=typeof window&&this._optimizeForSpeed){this._tags[0]=this.makeStyleTag(this._name),this._optimizeForSpeed="insertRule"in this.getSheet(),this._optimizeForSpeed||(i||console.warn("StyleSheet: optimizeForSpeed mode not supported falling back to standard mode."),this.flush(),this._injected=!0);return}this._serverSheet={cssRules:[],insertRule:function(t,s){return"number"==typeof s?e._serverSheet.cssRules[s]={cssText:t}:e._serverSheet.cssRules.push({cssText:t}),s},deleteRule:function(t){e._serverSheet.cssRules[t]=null}}},t.getSheetForTag=function(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]},t.getSheet=function(){return this.getSheetForTag(this._tags[this._tags.length-1])},t.insertRule=function(e,t){if(d(o(e),"`insertRule` accepts only strings"),"undefined"==typeof window)return"number"!=typeof t&&(t=this._serverSheet.cssRules.length),this._serverSheet.insertRule(e,t),this._rulesCount++;if(this._optimizeForSpeed){var s=this.getSheet();"number"!=typeof t&&(t=s.cssRules.length);try{s.insertRule(e,t)}catch(t){return i||console.warn("StyleSheet: illegal rule: \n\n"+e+"\n\nSee https://stackoverflow.com/q/20007992 for more info"),-1}}else{var r=this._tags[t];this._tags.push(this.makeStyleTag(this._name,e,r))}return this._rulesCount++},t.replaceRule=function(e,t){if(this._optimizeForSpeed||"undefined"==typeof window){var s="undefined"!=typeof window?this.getSheet():this._serverSheet;if(t.trim()||(t=this._deletedRulePlaceholder),!s.cssRules[e])return e;s.deleteRule(e);try{s.insertRule(t,e)}catch(r){i||console.warn("StyleSheet: illegal rule: \n\n"+t+"\n\nSee https://stackoverflow.com/q/20007992 for more info"),s.insertRule(this._deletedRulePlaceholder,e)}}else{var r=this._tags[e];d(r,"old rule at index `"+e+"` not found"),r.textContent=t}return e},t.deleteRule=function(e){if("undefined"==typeof window){this._serverSheet.deleteRule(e);return}if(this._optimizeForSpeed)this.replaceRule(e,"");else{var t=this._tags[e];d(t,"rule at index `"+e+"` not found"),t.parentNode.removeChild(t),this._tags[e]=null}},t.flush=function(){this._injected=!1,this._rulesCount=0,"undefined"!=typeof window?(this._tags.forEach(function(e){return e&&e.parentNode.removeChild(e)}),this._tags=[]):this._serverSheet.cssRules=[]},t.cssRules=function(){var e=this;return"undefined"==typeof window?this._serverSheet.cssRules:this._tags.reduce(function(t,s){return s?t=t.concat(Array.prototype.map.call(e.getSheetForTag(s).cssRules,function(t){return t.cssText===e._deletedRulePlaceholder?null:t})):t.push(null),t},[])},t.makeStyleTag=function(e,t,s){t&&d(o(t),"makeStyleTag accepts only strings as second parameter");var r=document.createElement("style");this._nonce&&r.setAttribute("nonce",this._nonce),r.type="text/css",r.setAttribute("data-"+e,""),t&&r.appendChild(document.createTextNode(t));var a=document.head||document.getElementsByTagName("head")[0];return s?a.insertBefore(r,s):a.appendChild(r),r},function(e,t){for(var s=0;s<t.length;s++){var r=t[s];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(e.prototype,[{key:"length",get:function(){return this._rulesCount}}]),e}();function d(e,t){if(!e)throw Error("StyleSheet: "+t+".")}var c=function(e){for(var t=5381,s=e.length;s;)t=33*t^e.charCodeAt(--s);return t>>>0},f={};function u(e,t){if(!t)return"jsx-"+e;var s=String(t),r=e+s;return f[r]||(f[r]="jsx-"+c(e+"-"+s)),f[r]}function h(e,t){"undefined"==typeof window&&(t=t.replace(/\/style/gi,"\\/style"));var s=e+t;return f[s]||(f[s]=t.replace(/__jsx-style-dynamic-selector/g,e)),f[s]}var b=function(){function e(e){var t=void 0===e?{}:e,s=t.styleSheet,r=void 0===s?null:s,a=t.optimizeForSpeed,n=void 0!==a&&a;this._sheet=r||new l({name:"styled-jsx",optimizeForSpeed:n}),this._sheet.inject(),r&&"boolean"==typeof n&&(this._sheet.setOptimizeForSpeed(n),this._optimizeForSpeed=this._sheet.isOptimizeForSpeed()),this._fromServer=void 0,this._indices={},this._instancesCounts={}}var t=e.prototype;return t.add=function(e){var t=this;void 0===this._optimizeForSpeed&&(this._optimizeForSpeed=Array.isArray(e.children),this._sheet.setOptimizeForSpeed(this._optimizeForSpeed),this._optimizeForSpeed=this._sheet.isOptimizeForSpeed()),"undefined"==typeof window||this._fromServer||(this._fromServer=this.selectFromServer(),this._instancesCounts=Object.keys(this._fromServer).reduce(function(e,t){return e[t]=0,e},{}));var s=this.getIdAndRules(e),r=s.styleId,a=s.rules;if(r in this._instancesCounts){this._instancesCounts[r]+=1;return}var n=a.map(function(e){return t._sheet.insertRule(e)}).filter(function(e){return -1!==e});this._indices[r]=n,this._instancesCounts[r]=1},t.remove=function(e){var t=this,s=this.getIdAndRules(e).styleId;if(function(e,t){if(!e)throw Error("StyleSheetRegistry: "+t+".")}(s in this._instancesCounts,"styleId: `"+s+"` not found"),this._instancesCounts[s]-=1,this._instancesCounts[s]<1){var r=this._fromServer&&this._fromServer[s];r?(r.parentNode.removeChild(r),delete this._fromServer[s]):(this._indices[s].forEach(function(e){return t._sheet.deleteRule(e)}),delete this._indices[s]),delete this._instancesCounts[s]}},t.update=function(e,t){this.add(t),this.remove(e)},t.flush=function(){this._sheet.flush(),this._sheet.inject(),this._fromServer=void 0,this._indices={},this._instancesCounts={}},t.cssRules=function(){var e=this,t=this._fromServer?Object.keys(this._fromServer).map(function(t){return[t,e._fromServer[t]]}):[],s=this._sheet.cssRules();return t.concat(Object.keys(this._indices).map(function(t){return[t,e._indices[t].map(function(e){return s[e].cssText}).join(e._optimizeForSpeed?"":"\n")]}).filter(function(e){return!!e[1]}))},t.styles=function(e){var t,s;return t=this.cssRules(),void 0===(s=e)&&(s={}),t.map(function(e){var t=e[0],r=e[1];return n.default.createElement("style",{id:"__"+t,key:"__"+t,nonce:s.nonce?s.nonce:void 0,dangerouslySetInnerHTML:{__html:r}})})},t.getIdAndRules=function(e){var t=e.children,s=e.dynamic,r=e.id;if(s){var a=u(r,s);return{styleId:a,rules:Array.isArray(t)?t.map(function(e){return h(a,e)}):[h(a,t)]}}return{styleId:u(r),rules:Array.isArray(t)?t:[t]}},t.selectFromServer=function(){return Array.prototype.slice.call(document.querySelectorAll('[id^="__jsx-"]')).reduce(function(e,t){return e[t.id.slice(2)]=t,e},{})},e}(),x=a.createContext(null);x.displayName="StyleSheetContext";var m=n.default.useInsertionEffect||n.default.useLayoutEffect,p="undefined"!=typeof window?new b:void 0;function g(e){var t=p||a.useContext(x);return t&&("undefined"==typeof window?t.add(e):m(function(){return t.add(e),function(){t.remove(e)}},[e.id,String(e.dynamic)])),null}g.dynamic=function(e){return e.map(function(e){return u(e[0],e[1])}).join(" ")},t.style=g},8059:function(e,t,s){"use strict";e.exports=s(3398).style},2298:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return f}});var r=s(7437),a=s(8059),n=s.n(a),i=s(2265),o=s(6463),l=s(5735),d=s(9842),c=s(7312);function f(){var e,t,s;let[a,f]=(0,i.useState)(!0),[u,h]=(0,i.useState)([]),[b,x]=(0,i.useState)(0),[m,p]=(0,i.useState)(""),[g,j]=(0,i.useState)(!1),v=(0,o.useRouter)(),y=(0,i.useRef)(null),[S,w]=(0,i.useState)({}),_=(0,i.useRef)(null),k=(0,i.useRef)(0),N=(0,i.useRef)(0),z=(0,i.useRef)(0),[R,C]=(0,i.useState)({}),[I,F]=(0,i.useState)(!1),[E,A]=(0,i.useState)(!1);(0,i.useEffect)(()=>{let e=(0,l.Aj)(c.I,e=>{e?f(!1):v.replace("/admin/login")});return()=>e()},[v]),(0,i.useEffect)(()=>{if(a)return;let e=(0,d.cf)((0,d.hJ)(c.db,"supportChatStatus"),e=>{let t={};e.forEach(e=>{let s=e.data();t[e.id]=s.status}),w(t)});return()=>e()},[a]),(0,i.useEffect)(()=>{if(a)return;let e=(0,d.IO)((0,d.hJ)(c.db,"supportChats"),(0,d.Xo)("createdAt")),t=(0,d.cf)(e,e=>{let t=[];e.forEach(e=>{t.push({id:e.id,...e.data()})});let s={};t.forEach(e=>{e.chatId&&(s[e.chatId]||(s[e.chatId]=[]),s[e.chatId].push({author:e.author,message:e.message,createdAt:e.createdAt&&e.createdAt.seconds?1e3*e.createdAt.seconds:Date.now()}))});let r=Object.entries(s).map(e=>{let[t,s]=e;return{chatId:t,messages:s.sort((e,t)=>e.createdAt-t.createdAt)}});r.sort((e,t)=>{let s=e.messages.length?e.messages[e.messages.length-1].createdAt:0;return(t.messages.length?t.messages[t.messages.length-1].createdAt:0)-s}),h(r)});return()=>t()},[a]),(0,i.useEffect)(()=>{var e;null===(e=y.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})},[u,b]),(0,i.useEffect)(()=>{_.current=new Audio("/sound.mp3"),_.current.volume=.8},[]),(0,i.useEffect)(()=>{if(a)return;let e=Date.now(),t=0;u.forEach(e=>{t+=e.messages.length});let s=u.length>N.current,r=!1;if(!s&&u.length===N.current){let e=z.current;for(let t of u)for(let s of t.messages)"user"===s.author&&e--;e<0&&(r=!0)}if((s||r)&&e-k.current>2e3){var n,i;null===(n=_.current)||void 0===n||n.pause(),_.current.currentTime=0,null===(i=_.current)||void 0===i||i.play(),k.current=e}N.current=u.length,z.current=0,u.forEach(e=>{z.current+=e.messages.filter(e=>"user"===e.author).length})},[u,a]);let T=(0,i.useCallback)(e=>{let t=e.target;if(u[b]&&t.scrollHeight-t.scrollTop-t.clientHeight<10){let e=u[b].chatId,t=u[b].messages.filter(e=>"user"===e.author).length;C(s=>({...s,[e]:t}))}},[u,b]);(0,i.useEffect)(()=>{u[b]&&setTimeout(()=>{let e=document.getElementById("chat-messages-container");if(e&&e.scrollHeight-e.scrollTop-e.clientHeight<10){let e=u[b].chatId,t=u[b].messages.filter(e=>"user"===e.author).length;C(s=>({...s,[e]:t}))}},100)},[b,u]);let W=async()=>{if(!m.trim()||g||!u[b])return;j(!0);let e=u[b].chatId;await (0,d.ET)((0,d.hJ)(c.db,"supportChats"),{chatId:e,author:"admin",message:m,createdAt:new Date}),p(""),j(!1)},O=async(e,t)=>{await (0,d.pl)((0,d.JU)(c.db,"supportChatStatus",e),{status:t},{merge:!0})},B=async e=>{let t=(0,d.IO)((0,d.hJ)(c.db,"supportChats"),(0,d.ar)("chatId","==",e)),s=await (0,d.PL)(t),r=(0,d.qs)(c.db);s.forEach(e=>r.delete(e.ref)),r.delete((0,d.JU)(c.db,"supportChatStatus",e)),await r.commit(),h(t=>{let s=t.findIndex(t=>t.chatId===e),r=b;return s===b?r=0:b>s&&(r=b-1),x(Math.max(0,Math.min(r,t.length-2))),t})};if(a)return(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center text-2xl",children:"Загрузка..."});let L={new:"#22c55e",progress:"#ff8800",done:"#ef4444"},D=u[b],M=D&&S[D.chatId]||"new";return(0,r.jsxs)("div",{className:"jsx-892064abb0a89f4e min-h-screen flex flex-col text-white bg-dark",children:[(0,r.jsxs)("main",{className:"jsx-892064abb0a89f4e flex flex-1 w-full h-screen max-h-screen",children:[(0,r.jsxs)("aside",{className:"jsx-892064abb0a89f4e w-80 bg-[#1a1a1a] border-r border-[#232323] flex flex-col overflow-y-auto",children:[(0,r.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-start",gap:4},className:"jsx-892064abb0a89f4e",children:[(0,r.jsx)("button",{onClick:()=>v.push("/admin"),style:{background:"none",border:"none",padding:0,marginBottom:2,cursor:"pointer",outline:"none"},title:"Назад",className:"jsx-892064abb0a89f4e",children:(0,r.jsx)("svg",{width:"28",height:"28",viewBox:"0 0 24 24",fill:"none",stroke:"#ff8800",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",style:{transition:"stroke 0.2s"},className:"jsx-892064abb0a89f4e",children:(0,r.jsx)("path",{d:"M15 18l-6-6 6-6",className:"jsx-892064abb0a89f4e"})})}),(0,r.jsx)("div",{style:{paddingTop:0},className:"jsx-892064abb0a89f4e p-6 pb-2 text-2xl font-bold text-orange-400 flex items-center justify-between",children:"Чаты"})]}),(0,r.jsxs)("div",{className:"jsx-892064abb0a89f4e flex-1 flex flex-col gap-2 p-2 pr-0 overflow-y-auto",children:[0===u.length&&(0,r.jsx)("div",{className:"jsx-892064abb0a89f4e text-gray-400 text-center mt-10",children:"Нет новых чатов"}),u.map((e,t)=>{let s=e.messages[e.messages.length-1],a=S[e.chatId]||"new",n=Math.max(0,e.messages.filter(e=>"user"===e.author).length-(R[e.chatId]||0));return(0,r.jsxs)("div",{onClick:()=>x(t),className:"jsx-892064abb0a89f4e "+"chat-card flex items-center justify-between px-4 py-3 mb-1 ".concat(b===t?"selected":""),children:[(0,r.jsxs)("div",{className:"jsx-892064abb0a89f4e",children:[(0,r.jsx)("div",{className:"jsx-892064abb0a89f4e font-semibold",children:e.chatId}),(0,r.jsx)("div",{className:"jsx-892064abb0a89f4e text-sm text-gray-400 truncate max-w-[140px]",children:s?s.message:(0,r.jsx)("span",{className:"jsx-892064abb0a89f4e italic text-gray-500",children:"Нет сообщений"})})]}),(0,r.jsxs)("div",{className:"jsx-892064abb0a89f4e flex flex-row items-center gap-2",children:[(0,r.jsx)("span",{className:"jsx-892064abb0a89f4e text-xs text-gray-400",children:s?new Date(s.createdAt).toLocaleTimeString().slice(0,5):"--:--"}),(0,r.jsx)("span",{style:{width:18,height:18,borderRadius:"50%",background:L[a],display:"inline-block",border:"2px solid #232323",position:"relative"},className:"jsx-892064abb0a89f4e"}),n>0&&(0,r.jsx)("span",{style:{minWidth:24,height:24,display:"inline-flex",alignItems:"center",justifyContent:"center",borderRadius:12,background:"linear-gradient(90deg,#ff8800,#a259ff)",color:"#fff",fontWeight:700,fontSize:15,marginLeft:8,boxShadow:"0 2px 8px #a259ff55",padding:"0 8px"},className:"jsx-892064abb0a89f4e",children:n})]})]},e.chatId)})]})]}),(0,r.jsxs)("section",{className:"jsx-892064abb0a89f4e flex-1 flex flex-col h-full",children:[(0,r.jsxs)("div",{className:"jsx-892064abb0a89f4e flex items-center gap-6 px-8 py-6 border-b border-[#232323] bg-[#232323] justify-between",children:[(0,r.jsxs)("div",{className:"jsx-892064abb0a89f4e flex items-center gap-6",children:[(0,r.jsx)("div",{className:"jsx-892064abb0a89f4e bg-[#181818] rounded-full p-4 flex items-center justify-center shadow-lg",children:(0,r.jsx)("img",{src:"/trader.png",alt:"avatar",style:{width:48,height:48,borderRadius:"50%",objectFit:"cover",boxShadow:"0 2px 8px #a259ff55",border:"2px solid #a259ff"},onError:e=>{e.currentTarget.src="/trader.gif"},className:"jsx-892064abb0a89f4e"})}),(0,r.jsx)("div",{className:"jsx-892064abb0a89f4e",children:(0,r.jsx)("div",{className:"jsx-892064abb0a89f4e text-lg font-bold",children:(null===(e=u[b])||void 0===e?void 0:e.chatId)||"-"})})]}),(()=>{var e;let t=null===(e=u[b])||void 0===e?void 0:e.chatId,s=S[t]||"new";return"new"===s?(0,r.jsx)("button",{onClick:()=>O(t,"progress"),style:{background:L.progress,color:"#232323",fontWeight:700,borderRadius:12,padding:"10px 22px",fontSize:18,boxShadow:"0 2px 8px #facc1555",border:"none",cursor:"pointer"},className:"jsx-892064abb0a89f4e",children:"Выполняю"}):"progress"===s?(0,r.jsx)("button",{onClick:()=>O(t,"done"),style:{background:L.done,color:"#fff",fontWeight:700,borderRadius:12,padding:"10px 22px",fontSize:18,boxShadow:"0 2px 8px #22c55e55",border:"none",cursor:"pointer"},className:"jsx-892064abb0a89f4e",children:"Завершено"}):"done"===s?(0,r.jsxs)("div",{style:{display:"flex",gap:16,alignItems:"center"},className:"jsx-892064abb0a89f4e",children:[(0,r.jsx)("button",{onClick:()=>F(!0),style:{background:L.done,color:"#fff",fontWeight:700,borderRadius:12,padding:"10px 22px",fontSize:18,boxShadow:"0 2px 8px #22c55e55",border:"none",display:"inline-block",cursor:"pointer"},className:"jsx-892064abb0a89f4e",children:"✓ Завершён"}),(0,r.jsx)("button",{onClick:()=>A(!0),style:{background:"#ef4444",color:"#fff",fontWeight:700,borderRadius:12,padding:"10px 22px",fontSize:18,border:"none",boxShadow:"0 2px 8px #ef444488",cursor:"pointer"},className:"jsx-892064abb0a89f4e",children:"Удалить"})]}):null})()]}),(0,r.jsxs)("div",{style:{background:"#1a1a1a",position:"relative"},id:"chat-messages-container",onScroll:T,className:"jsx-892064abb0a89f4e flex-1 flex flex-col gap-1 px-8 py-6 overflow-y-auto",children:[(0,r.jsxs)("div",{style:{display:"flex",flexDirection:"column",justifyContent:"flex-end",minHeight:"100%",height:"100%",flex:1,filter:"done"===M?"blur(4px)":"none",pointerEvents:"done"===M?"none":"auto"},className:"jsx-892064abb0a89f4e",children:[(null===(s=u[b])||void 0===s?void 0:null===(t=s.messages)||void 0===t?void 0:t.length)?u[b].messages.map((e,t)=>(0,r.jsxs)("div",{style:{position:"relative"},className:"jsx-892064abb0a89f4e "+"flex flex-col ".concat("admin"===e.author?"items-end":"items-start"),children:["user"===e.author&&(0,r.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:2},className:"jsx-892064abb0a89f4e",children:[(0,r.jsx)("img",{src:"/trader.png",alt:"avatar",style:{width:36,height:36,borderRadius:"50%",objectFit:"cover",boxShadow:"0 2px 8px #a259ff55",border:"2px solid #a259ff"},onError:e=>{e.currentTarget.src="/trader.gif"},className:"jsx-892064abb0a89f4e"}),(0,r.jsx)("span",{style:{fontWeight:600,color:"#fff",fontSize:15},className:"jsx-892064abb0a89f4e",children:"Аноним"})]}),(0,r.jsx)("div",{className:"jsx-892064abb0a89f4e "+"msg-bubble ".concat("admin"===e.author?"msg-admin":"msg-user"),children:e.message}),(0,r.jsx)("div",{style:{textAlign:"admin"===e.author?"right":"left"},className:"jsx-892064abb0a89f4e msg-time",children:new Date(e.createdAt).toLocaleTimeString().slice(0,5)})]},t)):(0,r.jsx)("div",{className:"jsx-892064abb0a89f4e text-gray-400 text-center mt-10",children:"Нет сообщений"}),(0,r.jsx)("div",{ref:y,className:"jsx-892064abb0a89f4e"})]}),"done"===M&&(0,r.jsx)("div",{style:{position:"absolute",left:0,top:0,width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10},className:"jsx-892064abb0a89f4e",children:(0,r.jsxs)("div",{style:{background:"rgba(30,30,30,0.55)",borderRadius:24,padding:32,display:"flex",flexDirection:"column",alignItems:"center"},className:"jsx-892064abb0a89f4e",children:[(0,r.jsxs)("svg",{width:"64",height:"64",viewBox:"0 0 24 24",fill:"none",stroke:"#bbb",strokeWidth:"2.2",strokeLinecap:"round",strokeLinejoin:"round",className:"jsx-892064abb0a89f4e",children:[(0,r.jsx)("rect",{x:"4",y:"11",width:"16",height:"8",rx:"4",className:"jsx-892064abb0a89f4e"}),(0,r.jsx)("path",{d:"M8 11V7a4 4 0 1 1 8 0v4",className:"jsx-892064abb0a89f4e"})]}),(0,r.jsx)("div",{style:{color:"#bbb",fontWeight:600,fontSize:18,marginTop:12},className:"jsx-892064abb0a89f4e",children:"Чат завершён"})]})})]}),(0,r.jsxs)("div",{className:"jsx-892064abb0a89f4e px-8 py-5 bg-[#232323] border-t border-[#232323] flex flex-col gap-2 sticky bottom-0 z-10",children:[(0,r.jsx)("div",{className:"jsx-892064abb0a89f4e flex gap-2 mb-2 flex-wrap",children:["Здравствуйте! Чем можем помочь?","Ваш вопрос принят, ожидайте ответа.","Проблема решена, хорошего дня!","Пожалуйста, уточните детали проблемы.","Спасибо за обращение!"].map((e,t)=>(0,r.jsx)("button",{type:"button",style:{background:"#181818",color:"#ff8800",border:"1.5px solid #ff8800",borderRadius:8,padding:"6px 16px",fontWeight:600,fontSize:15,cursor:"pointer"},onClick:()=>p(e),disabled:"done"===M,className:"jsx-892064abb0a89f4e",children:e},t))}),(0,r.jsxs)("div",{className:"jsx-892064abb0a89f4e flex gap-3",children:[(0,r.jsx)("input",{type:"text",placeholder:"Введите сообщение...",value:m,onChange:e=>p(e.target.value),onKeyDown:e=>{"Enter"===e.key&&W()},disabled:g||!u[b]||"done"===M,className:"jsx-892064abb0a89f4e flex-1 rounded-xl px-4 py-3 bg-[#181818] text-white border border-[#333] focus:outline-none focus:border-orange-400"}),(0,r.jsx)("button",{onClick:W,disabled:g||!u[b]||!m.trim()||"done"===M,className:"jsx-892064abb0a89f4e bg-gradient-to-r from-orange-500 to-purple-500 text-white font-bold px-7 py-3 rounded-xl shadow hover:scale-105 transition-transform",children:g?"Отправка...":"Отправить"})]})]})]})]}),I&&(0,r.jsx)("div",{style:{position:"fixed",left:0,top:0,width:"100vw",height:"100vh",background:"rgba(0,0,0,0.45)",zIndex:1e3,display:"flex",alignItems:"center",justifyContent:"center"},className:"jsx-892064abb0a89f4e",children:(0,r.jsxs)("div",{style:{background:"#232323",borderRadius:20,padding:"36px 32px",boxShadow:"0 8px 32px #0008",minWidth:320,display:"flex",flexDirection:"column",alignItems:"center",gap:24},className:"jsx-892064abb0a89f4e",children:[(0,r.jsxs)("svg",{width:"54",height:"54",viewBox:"0 0 24 24",fill:"none",stroke:"#ff8800",strokeWidth:"2.2",strokeLinecap:"round",strokeLinejoin:"round",className:"jsx-892064abb0a89f4e",children:[(0,r.jsx)("rect",{x:"4",y:"11",width:"16",height:"8",rx:"4",className:"jsx-892064abb0a89f4e"}),(0,r.jsx)("path",{d:"M8 11V7a4 4 0 1 1 8 0v4",className:"jsx-892064abb0a89f4e"})]}),(0,r.jsx)("div",{style:{fontWeight:700,fontSize:20,marginBottom:8},className:"jsx-892064abb0a89f4e",children:"Подтвердите разблокировку чата"}),(0,r.jsx)("div",{style:{color:"#bbb",fontSize:15,marginBottom:8},className:"jsx-892064abb0a89f4e",children:"Чат снова станет активным, пользователь сможет продолжить диалог."}),(0,r.jsxs)("div",{style:{display:"flex",gap:16,marginTop:8},className:"jsx-892064abb0a89f4e",children:[(0,r.jsx)("button",{onClick:async()=>{F(!1),await O(u[b].chatId,"progress")},style:{background:"linear-gradient(90deg,#ff8800,#a259ff)",color:"#fff",fontWeight:700,border:"none",borderRadius:10,padding:"10px 28px",fontSize:17,cursor:"pointer",boxShadow:"0 2px 8px #a259ff55"},className:"jsx-892064abb0a89f4e",children:"Разблокировать"}),(0,r.jsx)("button",{onClick:()=>F(!1),style:{background:"#181818",color:"#ff8800",fontWeight:700,border:"1.5px solid #ff8800",borderRadius:10,padding:"10px 22px",fontSize:17,cursor:"pointer"},className:"jsx-892064abb0a89f4e",children:"Отмена"})]})]})}),E&&(0,r.jsx)("div",{style:{position:"fixed",left:0,top:0,width:"100vw",height:"100vh",background:"rgba(0,0,0,0.45)",zIndex:1e3,display:"flex",alignItems:"center",justifyContent:"center"},className:"jsx-892064abb0a89f4e",children:(0,r.jsxs)("div",{style:{background:"#232323",borderRadius:20,padding:"36px 32px",boxShadow:"0 8px 32px #0008",minWidth:320,display:"flex",flexDirection:"column",alignItems:"center",gap:24},className:"jsx-892064abb0a89f4e",children:[(0,r.jsxs)("svg",{width:"54",height:"54",viewBox:"0 0 24 24",fill:"none",stroke:"#ef4444",strokeWidth:"2.2",strokeLinecap:"round",strokeLinejoin:"round",className:"jsx-892064abb0a89f4e",children:[(0,r.jsx)("rect",{x:"5",y:"7",width:"14",height:"12",rx:"2",className:"jsx-892064abb0a89f4e"}),(0,r.jsx)("path",{d:"M10 11v4M14 11v4",className:"jsx-892064abb0a89f4e"}),(0,r.jsx)("path",{d:"M9 7V5a2 2 0 0 1 2-2h2a2 2 0 0 1 2 2v2",className:"jsx-892064abb0a89f4e"})]}),(0,r.jsx)("div",{style:{fontWeight:700,fontSize:20,marginBottom:8},className:"jsx-892064abb0a89f4e",children:"Подтвердите удаление чата"}),(0,r.jsx)("div",{style:{color:"#bbb",fontSize:15,marginBottom:8},className:"jsx-892064abb0a89f4e",children:"Чат и вся переписка будут удалены безвозвратно."}),(0,r.jsxs)("div",{style:{display:"flex",gap:16,marginTop:8},className:"jsx-892064abb0a89f4e",children:[(0,r.jsx)("button",{onClick:async()=>{A(!1),await B(u[b].chatId)},style:{background:"#ef4444",color:"#fff",fontWeight:700,border:"none",borderRadius:10,padding:"10px 28px",fontSize:17,cursor:"pointer",boxShadow:"0 2px 8px #ef444488"},className:"jsx-892064abb0a89f4e",children:"Удалить"}),(0,r.jsx)("button",{onClick:()=>A(!1),style:{background:"#181818",color:"#ff8800",fontWeight:700,border:"1.5px solid #ff8800",borderRadius:10,padding:"10px 22px",fontSize:17,cursor:"pointer"},className:"jsx-892064abb0a89f4e",children:"Отмена"})]})]})}),(0,r.jsx)(n(),{id:"892064abb0a89f4e",children:".chat-card{background:#232323;-webkit-border-radius:1.2rem;-moz-border-radius:1.2rem;border-radius:1.2rem;-webkit-transition:background.18s,box-shadow.18s;-moz-transition:background.18s,box-shadow.18s;-o-transition:background.18s,box-shadow.18s;transition:background.18s,box-shadow.18s;cursor:pointer}.chat-card.selected{background:#2d1e3a;-webkit-box-shadow:0 0 0 2px#a259ff;-moz-box-shadow:0 0 0 2px#a259ff;box-shadow:0 0 0 2px#a259ff}.chat-card:hover{background:#282828}.msg-bubble{max-width:70%;padding:.8em 1.2em;-webkit-border-radius:1.2em;-moz-border-radius:1.2em;border-radius:1.2em;margin-bottom:.5em;font-size:1.08rem;word-break:break-word}.msg-user{background:#232323;color:#fff;-webkit-border-bottom-left-radius:.3em;-moz-border-radius-bottomleft:.3em;border-bottom-left-radius:.3em;-webkit-align-self:flex-start;-ms-flex-item-align:start;align-self:flex-start}.msg-admin{background:-webkit-linear-gradient(left,#f80,#a259ff);background:-moz-linear-gradient(left,#f80,#a259ff);background:-o-linear-gradient(left,#f80,#a259ff);background:linear-gradient(90deg,#f80,#a259ff);color:#fff;-webkit-border-bottom-right-radius:.3em;-moz-border-radius-bottomright:.3em;border-bottom-right-radius:.3em;-webkit-align-self:flex-end;-ms-flex-item-align:end;align-self:flex-end}.msg-time{font-size:.85em;color:#aaa;margin-top:.1em;margin-bottom:.5em}::-webkit-scrollbar{width:8px;background:#232323}::-webkit-scrollbar-thumb{background:#232323;-webkit-border-radius:8px;-moz-border-radius:8px;border-radius:8px}"})]})}},7312:function(e,t,s){"use strict";s.d(t,{I:function(){return o},db:function(){return l}});var r=s(5236),a=s(5735),n=s(9842);let i=(0,r.C6)().length?(0,r.C6)()[0]:(0,r.ZF)({apiKey:"AIzaSyAouTEXN2lQapElxCEtmebO21t19i2WYns",authDomain:"bazara-vpn-admin.firebaseapp.com",projectId:"bazara-vpn-admin",storageBucket:"bazara-vpn-admin.appspot.com",messagingSenderId:"856281360473",appId:"1:856281360473:web:1b01584e7830672dcb2948"}),o=(0,a.v0)(i),l=(0,n.ad)(i)}},function(e){e.O(0,[358,465,926,971,23,744],function(){return e(e.s=8284)}),_N_E=e.O()}]);